import{e as x,r as v,i as y,k as h,c as d,l as g,a as s,v as C,F as V,j as b,o as i,t as _,n as M,d as S,_ as O,g as F,h as w,m as k,f as T,p as $}from"./DTAXPaEe.js";const U={class:"option-tag"},B=["value"],I={class:"tags"},N=["onClick"],j=x({__name:"OptionTag",props:{options:{},modelValue:{},type:{}},emits:["update:modelValue"],setup(f,{emit:m}){const p=f,t=m,a=v(p.modelValue),l=v(null),D=y(()=>p.options.filter(u=>!a.value.includes(u))),r=y(()=>p.type||"default"),e=()=>{l.value&&!a.value.includes(l.value)&&(a.value.push(l.value),t("update:modelValue",a.value)),l.value=null},o=u=>{a.value=a.value.filter(c=>c!==u),t("update:modelValue",a.value)};return h(()=>p.modelValue,u=>{a.value=u}),(u,c)=>(i(),d("div",U,[g(s("select",{class:"option-select","onUpdate:modelValue":c[0]||(c[0]=n=>l.value=n),onChange:e},[(i(!0),d(V,null,b(D.value,n=>(i(),d("option",{key:n,value:n},_(n),9,B))),128))],544),[[C,l.value]]),s("div",I,[(i(!0),d(V,null,b(a.value,n=>(i(),d("span",{key:n,class:M(["tag",r.value])},[S(_(n)+" ",1),s("button",{onClick:H=>o(n)},"x",8,N)],2))),128))])]))}}),Q=O(j,[["__scopeId","data-v-ccc7ce32"]]),Y="http://localhost:5019/api/";async function z(){return await(await fetch(Y+"Option/cities")).json()}const E={class:"filterbox"},G={class:"form-group"},L={class:"date-range"},R={class:"form-group"},q={key:0,class:"error-message"},A=x({__name:"filterbox",emits:["onQuery"],setup(f,{emit:m}){const p=m,t=v({startDate:"",endDate:"",cities:[]}),a=v(),l=v(null),D=()=>{if(new Date(t.value.startDate)>new Date(t.value.endDate)){l.value="開始日期不得晚於結束日期";return}l.value=null,p("onQuery",t.value)};return F(()=>{const r=new Date,e=new Date(r.getFullYear(),r.getMonth()-1,r.getDate()),o=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1),u=new Date(r);t.value.startDate=o.toISOString().split("T")[0],t.value.endDate=u.toISOString().split("T")[0],z().then(c=>{a.value=c})}),(r,e)=>(i(),d("div",E,[s("form",{onSubmit:$(D,["prevent"])},[s("div",G,[e[4]||(e[4]=s("label",{for:"dateRange"},"查詢區間",-1)),s("div",L,[g(s("input",{type:"date",id:"startDate","onUpdate:modelValue":e[0]||(e[0]=o=>t.value.startDate=o)},null,512),[[k,t.value.startDate]]),e[3]||(e[3]=s("span",null,"至",-1)),g(s("input",{type:"date",id:"endDate","onUpdate:modelValue":e[1]||(e[1]=o=>t.value.endDate=o)},null,512),[[k,t.value.endDate]])])]),s("div",R,[e[5]||(e[5]=s("label",{for:"cities"},"縣市別",-1)),a.value?(i(),T(Q,{key:0,options:a.value,modelValue:t.value.cities,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.cities=o)},null,8,["options","modelValue"])):w("",!0)]),e[6]||(e[6]=s("button",{type:"submit"},"查詢",-1)),l.value?(i(),d("p",q,_(l.value),1)):w("",!0)],32)]))}}),K=O(A,[["__scopeId","data-v-7b027fb2"]]);export{K as default};
